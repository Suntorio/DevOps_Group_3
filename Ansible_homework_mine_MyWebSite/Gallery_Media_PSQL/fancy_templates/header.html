<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>File Browser</title>

<div class="top-bar" style="display: flex; flex-direction: column; align-items: center; width: 100%;">
<!-- <div class="top-navigation"> -->

    
    <a href="/fancy-media/" class="home-icon-link" title="Back to Main Site">
        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
    </a>

    <div class="search-wrapper">
        <input type="text" id="search" onkeyup="filterList()" placeholder="Search files...">
        <span id="clear-search" onclick="clearSearch()">✕</span>
    </div>

    <!-- Description text in the top center of each album -->
    <div id="gallery-title" style="
        text-align: center; 
        font-size: 32px; 
        font-weight: 800; 
        color: #010000; 
        margin-bottom: 30px; 
        display: none; 
        max-width: 800px;
    "></div>

</div>

    <style>
        /* 1. MODERN BACKGROUND */
        body {
            background-color: #3572b9; /* Your base mint color */
            background-image: 
                radial-gradient(at 0% 0%, rgba(171, 219, 240, 0.852) 0, transparent 50%), 
                radial-gradient(at 100% 0%, rgba(7, 201, 240, 0.803) 0, transparent 50%),
                /* url("https://www.transparenttextures.com/patterns/cubes.png"); /* A lot of textures from the site! */
                url("https://www.transparenttextures.com/patterns/random-grey-variations.png");
            background-attachment: fixed;
        }

        /* Make cards look like they are floating on glass */
        .folder-card, tr[onclick] {
            background: rgba(255, 255, 255, 0.6) !important;
            backdrop-filter: blur(8px);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .folder-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        /* Container to align items horizontally */
        .top-navigation {
            display: flex;
            align-items: center; /* Vertically center items */
            padding: 15px 20px;
            background-color: rgba(255, 255, 255, 0.8); /* Slight transparent white */
            margin-bottom: 20px;
        }

        /* Style the Home Button */
        .home-icon-link {
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;        /* Dark grey icon color */
            text-decoration: none;
            margin-right: 0px; /* Space between icon and search bar */
            padding: 8px;
            border-radius: 50%; /* Make hover effect circular */
            transition: background-color 0.2s ease;
        }
        /* Hover Effect */
        .home-icon-link:hover {
            background-color: #e0e0e0; /* Light grey circle on hover */
            color: #000;
        }

        /* 2. SEARCH BAR STYLING */
        .search-wrapper {
            position: relative; 
            width: 100%; 
            max-width: 400px; 
            margin-bottom: 40px;
        }

        #search { 
            padding: 12px 20px; 
            padding-right: 40px;
            width: 100%; 
            border-radius: 0px; 
            border: 1px solid rgba(0,0,0,0.1); 
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(5px);
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            font-size: 15px;
            outline: none;
            box-sizing: border-box;
        }

        #clear-search {
            position: absolute; right: 12px; top: 50%; 
            transform: translateY(-50%); cursor: pointer; 
            color: #999; display: none; user-select: none; font-weight: bold;
        }

        /* 3. GRID LAYOUT */
        #list { display: flex; flex-wrap: wrap; gap: 20px; border: none; width: 100%; }
        #list tbody { 
            display: flex; 
            flex-wrap: wrap; 
            gap: 25px; 
            width: 100%; 
            justify-content: center;
            align-items: center;
            margin: 0 auto;
            padding: 0;
        }

        /* 4. STANDARD CARD (Files & Parent Directory) - SMALL SIZE */
        #list tr { 
            display: flex; 
            flex-direction: column; 
            background: #fff; 
            width: 220px; /* Small width */
            height: 250px; /* Small height */
            border-radius: 0px; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            overflow: hidden; 
            transition: transform 0.2s; 
            border: none; 
            position: relative;
        }

        #list tr:hover { transform: translateY(-5px); }

        /* 5. ALBUM CARD (Big Size) - Overrides standard card */
        /* Note: :not(.parent-card) ensures the Home button stays small */
        #list tr.folder-card:not(.parent-card) {
            width: 270px !important; 
            /* 3/4 12/16 15/16 */
            height: 300px !important;
            border: 0px solid #000507 !important; /* Black border */
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        /* Adjust thumbnail height for BIG albums */
        #list tr.folder-card:not(.parent-card) .thumb-box {
            height: 250px !important;
        }

        /* Standard Thumb Box */
        .thumb-box { 
            height: 180px; 
            width: 100%; 
            background: #eee; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            overflow: hidden; 
        }
        .thumb-box img, .thumb-box video { width: 100%; height: 100%; object-fit: cover; }

        /* 6. INFO BOX & TYPOGRAPHY */
        .info-box { 
            padding: 10px; 
            background: #fff; 
            flex-grow: 1; 
            display: flex; 
            flex-direction: column; 
            justify-content: center; /* Vertically center the text */
            border-top: 1px solid #eee; 
        }

        .folder-desc {
            font-size: 14px;
            color:#000000;
            font-weight: bold;
            line-height: 1.3;
            text-align: center; /* Center text since paths are gone */
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 2; 
            line-clamp: 2; 
            overflow: hidden;
        }

        /* File names (for non-albums) */
        .file-name { font-weight: 600; font-size: 14px; color: #333; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .file-meta { font-size: 14px; color: #777; display: flex; justify-content: space-between; margin-top: 4px;}

        /* 7. BADGES (Moved to Top Left) */
        .folder-badge {
            position: absolute;
            top: 15px; left: 15px; /* Moved to top */
            background: #1f2428;
            color: white;
            padding: 5px 12px;
            border-radius: 0px;
            font-size: 15px;
            font-weight: 600;
            text-transform: uppercase;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            z-index: 5;
        }

        /* 8. HIDING UNWANTED ELEMENTS */
        #path-title, .sort-dropdown, #list thead, #list td, .download-btn { display: none !important; }
        
        /* Hide loose text nodes in body */
        body { font-size: 0; }
        /* Restore font size for UI elements */
        .top-bar, #list, #search, .info-box, .folder-badge, .lb-nav, #lb-play { font-size: 14px; }

        /* Parent Directory Specifics */
        .parent-card { background: #f8f9fa !important; border: 1px solid #dee2e6 !important; }
        .parent-card .thumb-box { background: #e9ecef !important; }

        /* Video Play Icon */
        .thumb-box.video-type { position: relative; }
        .thumb-box.video-type::after {
            content: '▶'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            font-size: 40px; color: rgba(255, 255, 255, 0.9); background: rgba(0, 0, 0, 0.3);
            width: 60px; height: 60px; display: flex; align-items: center; justify-content: center;
            border-radius: 50%; pointer-events: none;
        }

        /* Lightbox Styles */
        #lightbox {
            display: none;
            position: fixed;
            z-index: 1000;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            align-items: center;
            justify-content: center;
            overflow: hidden;
            touch-action: none;
        }
        #lightbox[style*="display: flex"] ~ .footer-logo-container {
            display: none;
        }
        #lightbox img { transition: transform 0.1s ease-out; cursor: zoom-in; user-select: none; max-width: 90%; max-height: 90%; }
        #lightbox img.zoomed { cursor: grab; }
        #lightbox img.grabbing { cursor: grabbing !important; }
        #lightbox video { max-width: 90%; max-height: 90%; display: none; }
        
        /* Arrows' shadow scrolling */
        .lb-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.15);
            color: white;
            border: none;
            font-size: 40px;
            padding: 20px;
            cursor: pointer;
            z-index: 1001;
            border-radius: 0%;
            width: 50px;
            height: 65px;
            display:flex;
            align-items:center;
            justify-content:center;
            transition: background 0.3s;
        }
        .lb-nav:hover { background: rgba(255,255,255,0.3); }
        #lb-prev { left: 20px; }
        #lb-next { right: 20px; }
        
        /* Play/Pause button */
        #lb-play {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: 2px solid rgb(255, 255, 255);
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            z-index: 1002; }
        
        #lb-play:hover {
            background: rgba(0, 0, 0, 0.7) !important;
            /* Enlarged to 1.2 while maintaining center position */
            transform: scale(1.1); 
        }
    </style>

    <div id="lightbox" onclick="closeLightbox(event)">
        <button id="lb-play" onclick="event.stopPropagation(); toggleSlideshow()">▶ Play</button>
        <button id="lb-prev" class="lb-nav" onclick="event.stopPropagation(); changeMedia(-1)">❮</button>
        <img id="lightbox-img" src="" onmousedown="startDrag(event)" onmousemove="doDrag(event)" onmouseup="stopDrag(event)" onclick="event.stopPropagation()">
        <video id="lightbox-video" controls style="display:none;" onclick="event.stopPropagation()"></video>
        <button id="lb-next" class="lb-nav" onclick="event.stopPropagation(); changeMedia(1)">❯</button>
    </div>

</div>
</head>
<body>
<table id="list">