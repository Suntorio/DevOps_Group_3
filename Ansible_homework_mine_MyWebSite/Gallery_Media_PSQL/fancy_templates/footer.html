</table>

<div class="footer-logo-container">
    <img src="/fancy-media/AlexTechLogo-03.png" alt="Logo" class="footer-logo">
    <div class="footer-text">&copy; 2026 AlexTech | All Rights Reserved.</div>
</div>

    <style>
        .footer-logo-container {
            display: flex;
            flex-direction: column; /* This stacks the logo and text vertically */
            align-items: center;    /* Centers them horizontally */
            justify-content: center;
            padding: 40px 0 60px 0; /* Adds breathing room at the bottom */
            width: 100%;
        }
        .footer-logo {
            width: 120px;          /* Adjust size as needed */
            height: auto;
            opacity: 0.8;          /* Slightly transparent for a stylish look */
            margin-bottom: 8px;    /* Space between logo and text */
            transition: transform 0.3s ease;
            filter: drop-shadow(0px 4px 8px rgba(0,0,0,0.1));
        }
        .footer-logo:hover {
            opacity: 1;
            transform: scale(1.1);   /* Gentle grow effect on hover */
            filter: drop-shadow(0px 8px 16px rgba(0,0,0,0.2));
        }
        .footer-text {
            font-family: 'Segoe UI', Roboto, sans-serif;
            font-size: 14px;
            font-weight: 700;       /* Bold text */
            color: #151e22;       /* A stylish dark blue-grey (not harsh black) */
            letter-spacing: 1px;    /* Spacing makes it look premium */
            text-transform: none;
        }
    </style>

<script>
    // --- INTEGRATED CLOSE BUTTON STYLES ---
    const style = document.createElement('style');
    style.innerHTML = `
        #custom-close-btn {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%); /* Keeps it centered */
            z-index: 999999;
            cursor: pointer;
            color: white;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 50%;
            padding: 8px;
            display: none;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            border: 2px solid white;
        }
        #custom-close-btn:hover {
            background: rgba(0, 0, 0, 0.7) !important;
            /* Enlarged to 1.2 while maintaining center position */
            transform: translateX(-50%) scale(1.2); 
        }
    `;
    document.head.appendChild(style);

    let mediaList = [];
    let currentIndex = 0;

    // Create the button once on load
    const closeBtn = document.createElement('div');
    closeBtn.id = 'custom-close-btn';
    // Updated SVG to be smaller (24x24) with a thinner stroke (2)
    closeBtn.innerHTML = `
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>`;
    document.body.appendChild(closeBtn);

    function makeThumbnails() {
        // ... (rest of your makeThumbnails function remains the same) ...
        const rows = document.querySelectorAll("#list tbody tr");
        mediaList = []; 

        const folderData = {
            "Video/": "Dashcam video",
            "LA_Sights/": "Los Angeles and arounds",
            "Pictures/": "Just a lot of different pictures",
            
            "03_2023/": "2023",
            
            "02_2024/": "2024",
                        
            "01_2025/": "2025",
            "Policamp_2025/": "Roman's trip to the Running Springs",
            "Halloween_31.10.25/": "Halloween 31.10.2025",
            "UCLA_Event_02.11.25/": "UCLA Event 02.11.2025",

            "00_2026/": "2026",
            "Big_Bear_2026_Jan/": "Our trip to Big Bear Lake"
        };

        const pathSegments = window.location.pathname.split('/').filter(Boolean);
        const currentFolder = pathSegments.length > 0 ? pathSegments[pathSegments.length - 1] + "/" : "";

        const titleElement = document.getElementById("gallery-title");
        if (folderData[currentFolder] && titleElement) {
            titleElement.innerText = folderData[currentFolder];
            titleElement.style.display = "block";
        }

        const isRoot = window.location.pathname.replace(/\/$/, '').endsWith('fancy-media') || window.location.pathname === "/";

        rows.forEach((row) => {
            const cells = row.getElementsByTagName("td");
            if (cells.length < 3) return;

            const link = cells[0].querySelector("a");
            const url = link.getAttribute("href");
            const fileName = link.innerText.trim(); 
            const isFolder = fileName.endsWith("/");

            const hiddenFiles = ["cover.jpg", "cover_main.jpg", "alextechlogo-03.png", "index.html", "thumbs.db", ".ds_store"];
            if (hiddenFiles.includes(fileName.toLowerCase())) {
                row.style.display = "none";
                return;
            }

            if (fileName === "Parent directory" || url.includes("..")) {
                if (isRoot) {
                    row.style.display = "none";
                    return;
                }
                row.classList.add("folder-card", "parent-card");
                const thumbBox = document.createElement("div");
                thumbBox.className = "thumb-box";
                
                thumbBox.innerHTML = `
                    <svg width="70" height="70" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.2));">
                        <line x1="19" y1="12" x2="5" y2="12"></line>
                        <polyline points="12 19 5 12 12 5"></polyline>
                    </svg>
                    <div class="folder-badge" style="background: #6c757d;">HOME</div>
                `;
                
                const infoBox = document.createElement("div");
                infoBox.className = "info-box";
                infoBox.innerHTML = `<div class="file-name" style="color: #6c757d;">Parent Directory</div>`;
                row.innerHTML = "";
                row.appendChild(thumbBox);
                row.appendChild(infoBox);
                row.onclick = () => window.location.href = url;
                row.style.cursor = "pointer";
                return; 
            }
            
            const thumbBox = document.createElement("div");
            thumbBox.className = "thumb-box";
            const infoBox = document.createElement("div");
            infoBox.className = "info-box";

            if (isFolder) {
                row.classList.add("folder-card");
                const coverUrl = url + "cover.jpg";
                thumbBox.innerHTML = `<img src="${coverUrl}" onerror="this.parentElement.innerHTML='<span style=\'font-size:60px\'>üìÅ</span>'" style="object-fit: cover; width:100%; height:100%;"><div class="folder-badge">Album</div>`;
                const desc = folderData[fileName] || "Click to view album content";
                infoBox.innerHTML = `<div class="folder-desc">${desc}</div>`;
                row.onclick = () => window.location.href = url;
                row.style.cursor = "pointer";
            } else {
                const isImg = fileName.toLowerCase().match(/\.(jpg|jpeg|png|gif|webp|svg)$/i);
                const isVid = fileName.toLowerCase().match(/\.(mp4|webm|ogg|mov|avi)$/i);
                if (isImg || isVid) {
                    mediaList.push({url, isVid});
                    const itemIdx = mediaList.length - 1;
                    if (isVid) {
                        thumbBox.classList.add('video-type');
                        thumbBox.innerHTML = `<video src="${url}" muted onmouseover="this.play()" onmouseout="this.pause()"></video>`;
                    } else {
                        thumbBox.innerHTML = `<img src="${url}" loading="lazy">`;
                    }
                    row.onclick = (e) => { e.preventDefault(); openLightbox(itemIdx); };
                    row.style.cursor = "pointer";
                } else {
                    thumbBox.innerHTML = `<span style="font-size: 50px;">üìÑ</span>`;
                }
                const size = cells[1].innerText;
                const date = cells[2].innerText;
                infoBox.innerHTML = `<div class="file-name">${fileName}</div><div class="file-meta"><span>${size}</span><span>${date}</span></div>`;
            }
            row.innerHTML = "";
            row.appendChild(thumbBox);
            row.appendChild(infoBox);
        });
    }

    let isDragging = false;
    let startX, startY, translateX = 0, translateY = 0, scale = 1;

    function openLightbox(index) {
        // ... (rest of the function is the same)
        currentIndex = index;
        scale = 1; translateX = 0; translateY = 0;
        
        const item = mediaList[currentIndex];
        const img = document.getElementById('lightbox-img');
        const vid = document.getElementById('lightbox-video');

        img.style.display = 'none'; img.classList.remove('zoomed');
        updateImageTransform();
        vid.style.display = 'none'; vid.pause();

        if (item.isVid) {
            vid.src = item.url; vid.style.display = 'block'; vid.play();
        } else {
            img.src = item.url; img.style.display = 'block';
        }
        document.getElementById('lightbox').style.display = 'flex';
        
        // SHOW CLOSE BUTTON
        document.getElementById('custom-close-btn').style.display = 'flex';
    }

    // Logic for the close button click
    closeBtn.onclick = function(e) {
        e.stopPropagation();
        document.getElementById('lightbox').click(); // Triggers the existing close logic
    };

    function updateImageTransform() {
        // ... (rest of the code is the same)
        const img = document.getElementById('lightbox-img');
        img.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`;
    }

    const img = document.getElementById('lightbox-img');
    img.addEventListener('mousedown', (e) => {
        if (scale > 1) {
            isDragging = true; img.classList.add('grabbing');
            startX = e.clientX - translateX; startY = e.clientY - translateY;
            e.preventDefault(); e.stopPropagation();
        }
    });

    window.addEventListener('mousemove', (e) => {
        if (!isDragging) return;
        translateX = e.clientX - startX; translateY = e.clientY - startY;
        updateImageTransform();
    });

    window.addEventListener('mouseup', (e) => {
        if (isDragging) {
            isDragging = false; img.classList.remove('grabbing'); e.stopPropagation();
        }
    });

    // img.addEventListener('wheel', function(e) {
    //     e.preventDefault();
    //     const delta = e.deltaY > 0 ? -0.2 : 0.2;
    //     const newScale = scale + delta;
    //     if (newScale >= 1 && newScale <= 5) {
    //         scale = newScale;
    //         if (scale <= 1) { translateX = 0; translateY = 0; this.classList.remove('zoomed'); } 
    //         else { this.classList.add('zoomed'); }
    //         updateImageTransform();
    //     }
    // }, { passive: false });

    img.addEventListener('wheel', function(e) {
        e.preventDefault();
        // Smaller increments (0.1) feel more controlled than 0.2 (better!)
        const delta = e.deltaY > 0 ? -0.2 : 0.2;
        let newScale = scale + delta;

        // Limit zoom between 1x and 5x
        if (newScale <= 1) {
            newScale = 1;
            translateX = 0;
            translateY = 0;
            this.classList.remove('zoomed');
        } else if (newScale > 5) {
            newScale = 5; // Don't let it go past 5x
        }

        scale = newScale;
        if (scale > 1) this.classList.add('zoomed');
        updateImageTransform();
    }, { passive: false });

    img.addEventListener('dblclick', function(e) {
        e.stopPropagation(); // Don't close the lightbox
        scale = 1;
        translateX = 0;
        translateY = 0;
        this.classList.remove('zoomed');
        updateImageTransform();
    });

    function changeMedia(step) {
        scale = 1; translateX = 0; translateY = 0;
        currentIndex = (currentIndex + step + mediaList.length) % mediaList.length;
        openLightbox(currentIndex);
    }

    function filterList() {
        const input = document.getElementById("search");
        const clearBtn = document.getElementById("clear-search");
        const filter = input.value.toUpperCase();
        const rows = document.querySelectorAll("#list tbody tr");
        clearBtn.style.display = filter.length > 0 ? "block" : "none";
        rows.forEach(row => {
            const name = row.querySelector(".file-name")?.innerText.toUpperCase() || "";
            const desc = row.querySelector(".folder-desc")?.innerText.toUpperCase() || "";
            row.style.display = (name.includes(filter) || desc.includes(filter)) ? "flex" : "none";
        });
    }

    function clearSearch() {
        const input = document.getElementById("search");
        input.value = "";
        filterList();
        input.focus();
    }

    let slideshowInterval = null;
    function toggleSlideshow() {
        const btn = document.getElementById('lb-play');
        if (slideshowInterval) {
            clearInterval(slideshowInterval); slideshowInterval = null;
            btn.innerText = "‚ñ∂ Play"; btn.classList.remove('playing');
        } else {
            btn.innerText = "‚è∏ Pause"; btn.classList.add('playing');
            slideshowInterval = setInterval(() => { changeMedia(1); }, 3000);
        }
    }

    document.getElementById('lightbox').onclick = function() {
        this.style.display = 'none';
        if (slideshowInterval) toggleSlideshow();
        document.getElementById('lightbox-video').pause();
        // HIDE CLOSE BUTTON
        document.getElementById('custom-close-btn').style.display = 'none';
    };

    document.getElementById('lb-prev').onclick = (e) => { e.stopPropagation(); changeMedia(-1); };
    document.getElementById('lb-next').onclick = (e) => { e.stopPropagation(); changeMedia(1); };
    document.addEventListener('keydown', (e) => {
        if (document.getElementById('lightbox').style.display === 'flex') {
            if (e.key === "ArrowLeft") changeMedia(-1);
            if (e.key === "ArrowRight") changeMedia(1);
            if (e.key === "Escape") document.getElementById('lightbox').click();
        }
    });

    window.onload = makeThumbnails;
</script>
</body>
</html>